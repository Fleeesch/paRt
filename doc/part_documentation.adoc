:imagesdir: res/rnd
:toc: macro
:toclevels: 4
:numbered:
:author: Fleeesch
:revnumber: 1.2.6

= paRt User Guide

toc::[]

<<<

== Introduction

paRt is a custom Reaper theme built from the ground up, including its own custom Theme Adjuster. It focusses heavily on functionality and is meant to be compatible with a wide range of display formats.

== Installation

=== Installation via ReaPack

Import the repository into your ReaPack instance using the following link in ReaPack's repository manager:

`https://raw.githubusercontent.com/Fleeesch/ReaPack-Fleeesch/master/index.xml`

Search for "paRt" in ReaPack and install it.

image::themeadj_reapack_00.png[Reapack Installation]
image::themeadj_reapack_01.png[Reapack Installation]
image::themeadj_reapack_02.png[Reapack Installation]

<<<

=== Manual Installation

1. Download `part_manual_install.zip` from the https://github.com/Fleeesch/paRt/releases[paRt releases page]
2. extract the archive your REAPER resource folder
3. Import the **.lua** scripts from `Scripts/Fleeesch/Themes/paRt` into the REAPER Action List 
+
image::themeadj_manual_install_00.png[Manual Installtion: Action List]
+
4. Click the `New action` button and choose `Load ReaScript...` to import the LUA files
+
image::themeadj_manual_install_01.png[Manual Installtion: Add Scripts]
+
5. Navigate to the scripts inside your Reaper resource folder and import all the files at once
+
image::themeadj_manual_install_02.png[Manual Installtion: Select Script Files]
+
6. Verify that the scripts were successfully loaded by typing "part" into the filter box
+
image::themeadj_manual_install_03.png[Manual Installtion: Validate Scripts]

[WARNING]
You must keep the folder structure of the scripts intact. Changing it will likely break the Theme Adjuster.

<<<

== Theme Adjuster

=== Launching the Theme Adjuster

The Theme Adjuster is launched by triggering a LUA script:

- use the shortcut button in the transport section
- manually run the `paRt - Theme Adjuster.lua` script from the Action List

image::themeadj_open.png[Opening the Theme Adjuster]

=== Launching Conditions

There are a scenarios where the Theme Adjuster will refuse to work:

- when no valid paRt theme is active
- when your paRt theme version is lower than the version of the Theme Adjuster

It’s recommended to use the Theme Adjuster’s built-in controls to switch between paRt themes, but it also detects theme changes in real time when you switch themes through Reaper’s internal theme selector.

<<<

=== Overview

image::themeadj_gui.png[Theme Adjuster Overview]

The notification panel on the right side shows you hint messages for every element you hover over with the mouse cursor. Use it as your first point of reference if you’re unsure about something.

<<<

=== Using the Bank System

paRt provides a bank system for keeping things dynamic.

By activating the `[+]` button next to a parameter, you link that parameter to the bank system. You can then store up to eight variations of that parameter by switching between banks using the number buttons in the bottom-left section of the Theme Adjuster window.

image::bank.png[Using the Bank System]

[NOTE]
Changing bank slots or toggling the bank buttons won’t delete or overwrite any data, it simply tells the Theme Adjuster where to look for when reading or writing data

<<<

=== Copying Banks

You can copy parameter settings from the currently active bank to the other banks.

1. The currently selected bank is always the copy source
2. Press the `[Copy]` button to activate copy mode, the buttons colors will turn red
3. select the copy target banks by toggling the number buttons
4. press the `[Copy]` button again to copy the data

image::bank_copy.png[Using the Bank Copy Function]

[NOTE]
Pressing the `[Copy]` button without selecting any target banks will simply turn off copy mode without doing anything

<<<

=== Using Configuration Slots

You can save and load complete configurations using the slots in the bottom-right corner of the Theme Adjuster.

1. select the target slot by pressing one of the number buttons
2. click either `[Save]` or `[Load]`

image::config.png[Using the Configuration Slots]

[NOTE]
Configurations are stored as `*.partmap` files, but are essentially just LUA tables with a different extension. This is simply a safety precaution to prevent accidentally overwriting Theme Adjuster LUA files.


=== Configuration Reset

All parameters have hard-coded default values.

If you want to start from a clean slate, you can reset all parameters by activating the `[Reset]` button. As a safety measure, you need to press the button twice within a short period.

This will reset the complete data of the current configuration; that includes all the bank slot variations. The data from the configuration slots will be left untouched.

<<<

== Technical Notes

=== Theme Files

There are three theme files available, each with a different color scheme covering multiple brightness levels.

This is mostly for technical reasons:

- a large amount of the color values are static and embedded into the theme file
- the loading times per theme file become huge when loading a large set of bitmap variations
- the WLATER code would have to be even more complex that it already is

=== Theme Parameters

Reaper allows users to create an unlimited number of user-adjustable parameters for custom themes.

- Each parameter stores an integer value with a default and a defined range.
- Parameter values are stored separately for each theme file.

The paRt Theme Adjuster handles synchronization of these parameters across multiple theme files by keeping settings in a central configuration file. As soon as the Theme Adjuster is activated, it immediately takes care of synchronization.

=== Reaper Screensets/Layouts

Reaper provides an option to manage different layouts via the `Screensets/Layouts` menu, allowing elements to be configured individually for different tracks.

This feature was originally intended for creating alternative layouts for theme sections, but since REAPER v6, it has mostly been repurposed as a workaround for applying different zoom factors to theme elements. For this reason, it’s highly recommended to leave this section untouched when tinkering with the theme.

<<<

== Modding

PaRt is essentially a collection of Reaper themes with a bunch of LUA scripts. Since it is free and there is no copyright protection that comes with encryption methods, it can be modified without restrictions.

All the layouting is happening in the `rtconfig.txt` files. Be aware that the theme is quite complex in order to provide the amount of user-customization, so it's quite easy to break things.

=== Quick Guide

1. Open the ColorThemes folder in your Reaper installation.
2. Extract the paRt _ReaperThemeZip_ files into the ColorThemes folder.
3. Modify the extracted theme files as desired.

=== Detailed Guide

Locate the theme files in the _ColorThemes_ folder of your Reaper ressource path. If you’re not sure where your _ColorThemes_ folder is, use the menu action `Options > Show REAPER resource path in explorer/finder`. This will open the folder for you.

paRt provides its themes as _ReaperThemeZip_ files, one per theme. A _ReaperThemeZip_ is essentially a zip file under a different name, so you can treat it like any standard zip archive. Each paRt _ReaperThemeZip_ contains a _ReaperTheme_ file (named something like `part_dark_unpacked.ReaperTheme`) and a folder with its data. Extract the contents of the theme you want to modify into the ColorThemes folder.

The extracted theme can be loaded like any other theme. You can now replace or delete images, tweak colors using REAPER’s integrated theme tweaker, and modify the WALTER layout in the _rtconfig.txt_ file (located in the extracted theme folder).

=== Theme File Naming

When selecting a theme, the paRt Theme Adjuster dynamically searches for matching theme files rather than relying on a strict naming pattern. It is highly recommended to rename any modified ReaperTheme file to distinguish it from the original and prevent accidental overwrites during updates.

The basic ingredients for a proper paRt theme name are _"part"_ and the name of a color palette (_"dark"_ / _"dimmed"_ / _"light"_). For example:

- part-dark.ReaperTheme
- Part Light.ReaperTheme
- part_dimmed.ReaperTheme

This naming is case-insensitive. You can also use alternative separators instead of just spaces. Additionally, you can add _"mod"_ or _"unpacked"_ to influence the priority of your modified theme file. You can also include _"skip"_ in the filename to force the Theme Adjuster to ignore it.

The Theme Adjuster uses the following prioritization:

1. ReaperTheme file containing the word _"mod"_ or _"modded"_  
2. ReaperTheme file containing the word _"unpacked"_  
3. ReaperTheme file  

Renaming your modified file to something like _"part_dark_mod.ReaperTheme"_ will make it a high-priority theme, causing the Theme Adjuster to ignore all other theme files in the same folder.

The Theme Adjuster also displays a small info text in the bottom-right corner, indicating when you are using an unpacked or modded theme based on the name of the theme file.

[CAUTION]
Having a ReaperTheme and a ReaperThemeZip file with identical names in your ColorThemes folder is not recommended. The Theme Adjuster won't be able to tell them apart.

=== Theme Adjuster and Script Files

All scripts, including the Theme Adjuster, are stored in your Reaper resource path under `Scripts/Fleeesch/Themes/paRt/`.

Be aware that any edits to the Theme Adjuster will be overwritten by updates.

=== Configuration Files

Configuration slot files are stored in your Reaper resource folder under `Scripts/Fleeesch/Themes/paRt/conf/slot`. You can back up existing configurations using these files, or, if you prefer, edit the entire Theme Adjuster configuration manually in your favorite code editor. Note that this is not a nested LUA table, so manual editing may feel unintuitive.

Fallback configuration files are stored in `conf/default` and should be left untouched, as any automated update will overwrite them.

=== Custom Parameters

There is an extra tab in the Theme Adjuster displaying a set of placeholder parameters. These are reserved for modding and are free for you to use. Their WALTER addresses are shown in the static hint area when your cursor hovers over the slider and button elements.

This allows you to add additional adjustments to your modified paRt theme while keeping the original code untouched, helping to keep things organized and less messy.

You can also assign custom names to these parameters by editing a copy of the `conf/user/custom_parameters.lua.def` file. Simply duplicate the file under the name `custom_parameters.lua`, the Theme Adjuster will automatically prefer this file.

=== Versioning

- The version of a theme file is stored in its `rtconfig.txt` file using the naming scheme of a reserved parameter.
- The version of the Theme Adjuster is set manually in the `paRt - Theme Adjuster.lua` file

Be aware that changing version numbers without actually implementing the updates from those versions will likely cause the Theme Adjuster to fail in unpredictable ways.

=== Best Practice

- keep notes on what you've changed
- always keep backups of your modified content in case you need to reapply the changes
- avoid touching the original theme parameters if possible; the Theme Adjuster is very sensitive to those changes
- remember that anything installed by default through ReaPack will be overwritten by the next update

=== Notes

- The theme won’t refresh automatically; you need to select another theme and then reselect the one you’re working on. This can be automated by creating a _Custom Action_ in REAPER that switches to the next theme and then back to the previous theme in one step.  

- Most assets are provided for multiple zoom levels, found in their respective subfolders (e.g., 125 = 1.25 zoom factor). There are many exceptions where assets aren’t dpi-specific and are only available once, such as item backgrounds (item_bg.png, item_bg_sel.png).
